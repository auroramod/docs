<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<title data-react-helmet="true">Lua Syntax | H1-Mod Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.h1.gg/script-syntax"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Lua Syntax | H1-Mod Docs"><meta data-react-helmet="true" name="description" content="Callbacks"><meta data-react-helmet="true" property="og:description" content="Callbacks"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.h1.gg/script-syntax"><link data-react-helmet="true" rel="alternate" href="https://docs.h1.gg/script-syntax" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.h1.gg/script-syntax" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a81c4aea.css">
<link rel="preload" href="/assets/js/runtime~main.c5feb231.js" as="script">
<link rel="preload" href="/assets/js/main.bd5512e5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/h1-header.png" alt="H1-Mod Docs" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/h1-header.png" alt="H1-Mod Docs" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a href="https://h1.gg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/h1-mod" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">ðŸ‘‹ Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menuLinkText_1J2g">ðŸŽ® Play H1-Mod</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/install">How to install H1-Mod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/update">How to update H1-Mod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/uninstall">How to uninstall H1-Mod</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menuLinkText_1J2g">ðŸ›  Support</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/troubleshoot">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/errors">Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/functions">Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ingamename">Change in-game name</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/unlockall">Unlock everything</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menuLinkText_1J2g">ðŸ”¨ Dedicated Server</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/install-server">How to make a Dedicated Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/port-forwarding">Port Forwarding</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menuLinkText_1J2g">ðŸ’» Scripting</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scripting">Lua Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/load-script">Loading a Lua script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/script-syntax">Lua Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gsc-reference">Referencing GSC (+ GSC dump)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ui-scripting">LUI Scripting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menuLinkText_1J2g">ðŸ’£ Additional Features</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ranked">Ranked Multiplayer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/antialiasing">Anti-aliasing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aimassist">Aim assist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fullbright">Fullbright</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lua Syntax</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="callbacks">Callbacks<a aria-hidden="true" class="hash-link" href="#callbacks" title="Direct link to heading">â€‹</a></h2><p>Before we show any function examples for syntax examples, you must know what a lambda and a callback is. A lambda is a function that&#x27;s made when passing the argument. When doing a notify, interval, or timeout event (as shown below later), a function callback that&#x27;s specified is called.</p><p>You can either make a function callback that uses a lambda:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">level:onnotify(&quot;connected&quot;, function(player)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or, you can make a function callback by calling the function seperate:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">function on_player_connected(player)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">level:onnotify(&quot;connected&quot;, on_player_connected)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Syntax examples shown as mostly lambdas, while some are seperate-called functions.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="functions-defined-with-entity-prefix">Functions defined with &quot;entity:&quot; prefix<a aria-hidden="true" class="hash-link" href="#functions-defined-with-entity-prefix" title="Direct link to heading">â€‹</a></h2><p>Functions defined with an <code>entity:</code> prefix give the function the ability to use the <code>self</code> keyword, similar to GSC.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- entity: prefix defined, makes this function only available to be called on entities</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">function entity:connected()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(&quot;Player &quot; .. self.name .. &quot; connected&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">level:onnotify(&quot;connected&quot;, function(player)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    player:connected()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Syntax examples shown are mostly using entity-defined functions. The alternative to not defining the <code>entity:</code> prefix would be passing the player through like normal (as shown in <a href="#callbacks">callbacks</a>).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="types">Types<a aria-hidden="true" class="hash-link" href="#types" title="Direct link to heading">â€‹</a></h2><p>There are only 5 distinct types needed to interact with game&#x27;s scripting environment. LUA, of course, has more types, but what is meant by this is the following:</p><p>When dealing with events, functions or fields, no complex LUA types are supported, only these primitive types:</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="strings">Strings<a aria-hidden="true" class="hash-link" href="#strings" title="Direct link to heading">â€‹</a></h3><p>Strings are text enclosed by quotes as so: &quot;Hello World&quot;. There is not much to say about them, as they are a common concept.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="integer">Integer<a aria-hidden="true" class="hash-link" href="#integer" title="Direct link to heading">â€‹</a></h3><p>Integers are all whole numbers like 0, 1000 or -15.
Boolean values, so true and false, also fall under that category and are handled as 1 and 0 respectively.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="float">Float<a aria-hidden="true" class="hash-link" href="#float" title="Direct link to heading">â€‹</a></h3><p>Floating point values are all numbers like 1.05 or -10.5.
1.0 is also a floating point number literal. This is due to the dot notation, even though it&#x27;s technically a whole number.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="vector">Vector<a aria-hidden="true" class="hash-link" href="#vector" title="Direct link to heading">â€‹</a></h3><p>A vector is a type that groups exactly 3 floating point components. It is used to represent coordinates, angles or colors in the game.</p><p>Creating a new vector can be done like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local my_vector = vector:new(1.0, 2.0, 3.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- Statements below will be true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert(my_vector.x == 1.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert(my_vector.y == 2.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert(my_vector.z == 3.0)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can access the individual components using either <code>x</code>, <code>y</code>, and <code>z</code> property accessors, or <code>r</code>, <code>g</code> and <code>b</code> (note that both notations are equivalent, meaning <code>x</code> â‰˜ <code>r</code>, <code>y</code> â‰˜ <code>g</code> and <code>z</code> â‰˜ <code>b</code>).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local my_vector = vector:new() -- vector is initialized as (0.0, 0.0, 0.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_vector.x = 5.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_vector.y = 1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_vector.z = 2.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local val1 = my_vector.x -- val1 is 5.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local val2 = my_vector.r -- val2 is also 5.0, as x and r are equivalent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- The statements below are always true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert(my_vector.y == my_vector.g)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert(my_vector.z == my_vector.b)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="entity">Entity<a aria-hidden="true" class="hash-link" href="#entity" title="Direct link to heading">â€‹</a></h3><p>Entities represent &#x27;things&#x27; that &#x27;exist&#x27; in the game. Players are for example entities.
Vehicles, hud elements, or the level are also entites. They can fire events, but also call functions into the game&#x27;s scripting environment. Some entites also have certain fields (or properties), like an origin or a name.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="events">Events<a aria-hidden="true" class="hash-link" href="#events" title="Direct link to heading">â€‹</a></h2><p>Entites can fire notify events. The concept was previously known as <code>notify</code> and <code>waittill</code> in GSC.
Popular events are the <code>connected</code> event fired by the level, or the <code>spawned_player</code> event fired by players.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="event-listening-formerly-known-as-waittill">Event Listening (formerly known as &quot;waittill&quot;)<a aria-hidden="true" class="hash-link" href="#event-listening-formerly-known-as-waittill" title="Direct link to heading">â€‹</a></h3><p>You can listen to any of these events by calling either <code>onnotify</code> or <code>onnotifyonce</code> on an entity:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">level:onnotify(&quot;connected&quot;, function(player)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the example above, the <code>player_connected</code> callback is called every time a player connects. If you don&#x27;t want to be notified every time, you can use <code>onnotifyonce</code> instead, which only fires once.</p><p>If you called <code>onnotify</code> (or <code>onnotifyonce</code>), but want to stop listening for notifications, you can call clear on the object is returned:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local listener = level:onnotify(&quot;connected&quot;, function(player)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">listener:clear() -- stops listening for the `connected` event</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Events can carry arguments. For example, the <code>connected</code> event by the level carries the connecting <code>player</code> as an argument. You can get these arguments by adding paramters to the callback functions, as seen in the player_connected callback above.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="firing-formerly-known-as-notify">Firing (formerly known as &quot;notify&quot;)<a aria-hidden="true" class="hash-link" href="#firing-formerly-known-as-notify" title="Direct link to heading">â€‹</a></h3><p>To fire (or notify) a event, you can call the <code>notify</code> function on an entity:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- this callback function is called by the &quot;connected&quot; event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">function entity:connected()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    self:onnotify(&quot;hello_world&quot;, function()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        print(&quot;Callback was recieved for hello_world notify&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    self:notify(&quot;hello_world&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Don&#x27;t forget - you can also pass arguments to the event (there can be any amount, but they must be instances of one of the 5 primitive <a href="#types">types</a>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- this callback function is called by the &quot;connected&quot; event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">function entity:connected()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    self:onnotify(&quot;hello_world&quot;, function(str1, str2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        print(&quot;Callback was recieved for hello_world notify: &quot; .. str1 &quot; &quot; .. str2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    self:notify(&quot;hello_world&quot;, &quot;Hello&quot;, &quot;World&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="timers">Timers<a aria-hidden="true" class="hash-link" href="#timers" title="Direct link to heading">â€‹</a></h2><p>Timers are required to delay the execution. GSC had a function called <code>wait</code>, which paused the execution of a thread for a specific amount of time. Due to the control flow being different in LUA, there are neither threads, nor is there a wait function.</p><p>However, you can do something else to delay the execution. The functions <code>ontimeout</code> and <code>oninterval</code>, which need to be called on the game object, allow to do that. They take two arguments, a callback and a time to wait in milliseconds.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">game:ontimeout(function()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end, 1000)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Similar to the functions <code>setTimeout</code> and <code>setInterval</code> known from JavaScript, <code>ontimeout</code> executes the callback exactly once when the delay is reached and <code>oninterval</code> executes it every time the specified amount of time passes.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local timer = game:ontimeout(function()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end, 1000)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">timer:clear()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Timer callbacks don&#x27;t and shouldn&#x27;t take any arguments. If you want to pass an object, like a player, to a callback, you have to capture it, in a lambda for example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">function entity:do_something_cool()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(self.name .. &quot; is now doing something cool.&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local player = -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">game:oninterval(function()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    player:do_something_cool()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end, 1000)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="functions">Functions<a aria-hidden="true" class="hash-link" href="#functions" title="Direct link to heading">â€‹</a></h2><p>The game provides a set of global functions and entity methods. The functions provided are pretty much the same as COD4 had them, or any other game that uses GSC. Since this game is heavily based off IW6 (Ghosts) engine and is very very similar, most of the GSC used in IW6 and S1 (Advanced Warfare) is the same.</p><p>You can use a community-made <a href="https://znation.nl/cod4script/" target="_blank" rel="noopener noreferrer">COD4 Scripting Reference</a> website to find some functions (libcod does not exist in stock GSC nor H1-Mod). Any functions, methods, or tokens should be all lowercase.</p><p>Global functions are functions that don&#x27;t need an entity to run. They are called on the <code>game</code> object (ex: <code>game:isplayer(player)</code>). When referring to the COD4 Scripting Reference, these functions won&#x27;t have have a <code>Call this on:</code> tab.</p><p>Example of a global function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local player = -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if game:isplayer(player) == 1 then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(player.name .. &quot; is a player&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>There are also member functions. These will have a <code>Call this on:</code> tab on the COD4 Scripting Reference. Example of a member function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local player = -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">player:freezecontrols(false)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For a list of all functions, methods, and tokens available in H1-Mod, have a look at the <a href="https://github.com/h1-mod/h1-mod/blob/develop/src/client/game/scripting/function_tables.cpp" target="_blank" rel="noopener noreferrer">function, method, and token tables</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="fields">Fields<a aria-hidden="true" class="hash-link" href="#fields" title="Direct link to heading">â€‹</a></h2><p>Entities do have fields (or properties). They differ for each type of entity. For example, players have fields like <code>name</code>, <code>origin</code>, or <code>angles</code> and hud elements have fields like <code>x</code>, <code>y</code>, or <code>alpha</code>.</p><p>You can get and set them like this (only the 5 primitive types are supported):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local player_name = player.name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">player.origin = vector:new()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>There is no complete list of which fields exist. For example, <code>level.players</code> is not a field and is a variable. Not every field from GSC is available in LUA and may also have a definition of <code>_ID&lt;decimal&gt;</code> or <code>_id_&lt;hex&gt;</code>, which you can find in the tutorial for finding variable/field IDs later.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="command-execution">Command execution<a aria-hidden="true" class="hash-link" href="#command-execution" title="Direct link to heading">â€‹</a></h2><p>Unlike in GSC, the scripting API allows to execute console commands.</p><p>You can use the <code>game:executecommand</code> function on the game object like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">game:executecommand(&quot;map mp_crash&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="noteworthy-information">Noteworthy information<a aria-hidden="true" class="hash-link" href="#noteworthy-information" title="Direct link to heading">â€‹</a></h2><p>Players can disconnect. It might sound obvious, but is important for scripting. Executing functions on a player that doesn&#x27;t exist won&#x27;t work. Additionally, captured player objects need to be freed.</p><p>GSC used to have a function called <code>endon</code>, which allowed to terminate a thread as soon as an event happend. For example, <code>player endon(&quot;disconnect&quot;)</code> stopped the execution of a thread when a player disconnected.</p><p>Back when IW6x had just released Lua scripting, the <code>endon</code> functionality did not exist. Later in IW6x, S1x, and now H1-Mod, the <code>endon</code> functionality has been implemented like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">function entity:do_something_cool()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(self.name .. &quot; is now doing something cool.&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local player = -- [...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local timer = game:oninterval(function()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    player:do_something_cool()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end, 1000)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- the interval timer loop will stop running when the `disconnect` event is called on the player</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">timer:endon(player, &quot;disconnect&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="callinghooking-gsc-functions">Calling/hooking GSC functions<a aria-hidden="true" class="hash-link" href="#callinghooking-gsc-functions" title="Direct link to heading">â€‹</a></h2><p>Refer to <a href="/gsc-reference">GSC Reference</a> to figure out how to do this.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/h1-mod/website/tree/docs/edit/docs/script-syntax.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/load-script"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Loading a Lua script</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/gsc-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Referencing GSC (+ GSC dump)<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#callbacks" class="table-of-contents__link toc-highlight">Callbacks</a></li><li><a href="#functions-defined-with-entity-prefix" class="table-of-contents__link toc-highlight">Functions defined with &quot;entity:&quot; prefix</a></li><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a><ul><li><a href="#strings" class="table-of-contents__link toc-highlight">Strings</a></li><li><a href="#integer" class="table-of-contents__link toc-highlight">Integer</a></li><li><a href="#float" class="table-of-contents__link toc-highlight">Float</a></li><li><a href="#vector" class="table-of-contents__link toc-highlight">Vector</a></li><li><a href="#entity" class="table-of-contents__link toc-highlight">Entity</a></li></ul></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a><ul><li><a href="#event-listening-formerly-known-as-waittill" class="table-of-contents__link toc-highlight">Event Listening (formerly known as &quot;waittill&quot;)</a></li><li><a href="#firing-formerly-known-as-notify" class="table-of-contents__link toc-highlight">Firing (formerly known as &quot;notify&quot;)</a></li></ul></li><li><a href="#timers" class="table-of-contents__link toc-highlight">Timers</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#fields" class="table-of-contents__link toc-highlight">Fields</a></li><li><a href="#command-execution" class="table-of-contents__link toc-highlight">Command execution</a></li><li><a href="#noteworthy-information" class="table-of-contents__link toc-highlight">Noteworthy information</a></li><li><a href="#callinghooking-gsc-functions" class="table-of-contents__link toc-highlight">Calling/hooking GSC functions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 - H1-Mod.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c5feb231.js"></script>
<script src="/assets/js/main.bd5512e5.js"></script>
</body>
</html>